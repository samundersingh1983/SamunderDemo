"use strict";(self.webpackChunkincident_report_ui=self.webpackChunkincident_report_ui||[]).push([[592],{9699:(D,u,i)=>{i.d(u,{e:()=>_});var t=i(1571);let _=(()=>{class c{}return c.\u0275fac=function(d){return new(d||c)},c.\u0275cmp=t.Xpm({type:c,selectors:[["app-exposure"]],decls:2,vars:0,template:function(d,l){1&d&&(t.TgZ(0,"p"),t._uU(1,"exposure works!"),t.qZA())}}),c})()},3944:(D,u,i)=>{i.d(u,{w:()=>_});var t=i(1571);let _=(()=>{class c{}return c.\u0275fac=function(d){return new(d||c)},c.\u0275cmp=t.Xpm({type:c,selectors:[["app-injury"]],decls:2,vars:0,template:function(d,l){1&d&&(t.TgZ(0,"p"),t._uU(1,"injury works!"),t.qZA())}}),c})()},6455:(D,u,i)=>{i.d(u,{N:()=>c});var t=i(1571),_=i(8270);let c=(()=>{class a{constructor(l){this.utils=l}getStrings(l){return this.utils.get(`api/strings/${l}`)}createString(l){return this.utils.post("api/strings",l)}editString(l){return this.utils.put(`api/strings/${l.ID}`,l)}deleteString(l){return this.utils.delete(`api/strings/${l.ID}`)}}return a.\u0275fac=function(l){return new(l||a)(t.LFG(_.F))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()},5167:(D,u,i)=>{i.d(u,{a:()=>_});var t=i(1571);let _=(()=>{class c{constructor(){this.incidentType="",this.incident={},this.subIncidents=[]}resetIncident(){this.incident={...this.incident},this.subIncidents.length=0}}return c.\u0275fac=function(d){return new(d||c)},c.\u0275prov=t.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()},6482:(D,u,i)=>{i.d(u,{U:()=>O});var t=i(1571),_=i(2831),c=i(5167),a=i(9805),d=i(2127),l=i(388),g=i(426),b=i(8270),h=i(6895),m=i(4006),x=i(7538);function E(r,f){1&r&&t._UZ(0,"div")}function T(r,f){if(1&r){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",2)(2,"form",3),t.YNc(3,E,1,0,"div",4),t.qZA()(),t.TgZ(4,"div",5)(5,"button",6),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.update())}),t._uU(6,"Save"),t.qZA(),t.TgZ(7,"button",7),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.close())}),t._uU(8,"Cancel"),t.qZA()(),t.BQk()}if(2&r){const e=t.oxw(),o=t.MAs(2);t.xp6(3),t.Q6J("ngTemplateOutlet",o),t.xp6(2),t.Q6J("disabled",!e.isValidForm())}}function I(r,f){if(1&r){const e=t.EpF();t.TgZ(0,"div",9)(1,"div",34)(2,"button",35),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.nextStep())}),t._uU(3),t.qZA()()()}if(2&r){t.oxw();const e=t.MAs(9),o=t.MAs(20),n=t.MAs(30),s=t.oxw();t.xp6(2),t.Q6J("disabled",e.invalid||o.invalid||n.invalid||!s.isValidForm()),t.xp6(1),t.Oqu(s.saveNextText)}}const v=function(r){return{"has-error":r}};function A(r,f){if(1&r){const e=t.EpF();t.TgZ(0,"div",8)(1,"div",9)(2,"label",10),t._uU(3," Date of Loss "),t._UZ(4,"span",11),t.qZA(),t.TgZ(5,"div",12)(6,"p",13)(7,"input",14,15),t.NdJ("ngModelChange",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.incident.ReportingDate=n)}),t.qZA(),t.TgZ(10,"span",16)(11,"button",17),t.NdJ("click",function(){t.CHM(e);const n=t.MAs(8);return t.KtG(n.show())}),t._UZ(12,"i",18),t.qZA()()()(),t.TgZ(13,"label",19),t._uU(14," Date Received "),t._UZ(15,"span",11),t.qZA(),t.TgZ(16,"div",12)(17,"p",13)(18,"input",20,21),t.NdJ("ngModelChange",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.incident.ReceiptDate=n)}),t.qZA(),t.TgZ(21,"span",16)(22,"button",17),t.NdJ("click",function(){t.CHM(e);const n=t.MAs(19);return t.KtG(n.show())}),t._UZ(23,"i",18),t.qZA()()()()(),t.TgZ(24,"div",22)(25,"label",23),t._uU(26," Name of Submitter "),t._UZ(27,"span",11),t.qZA(),t.TgZ(28,"div",24)(29,"input",25,26),t.NdJ("ngModelChange",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.incident.NameOfSubmitter=n)}),t.qZA()()(),t.TgZ(31,"div",9)(32,"label",27),t._uU(33," Additional Details "),t.qZA(),t.TgZ(34,"div",24)(35,"textarea",28),t.NdJ("ngModelChange",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.incident.AdditionalDetails=n)}),t.qZA()()(),t.TgZ(36,"div",9)(37,"label",29),t._uU(38," Closed Date "),t.qZA(),t.TgZ(39,"div",30)(40,"p",13)(41,"input",31,32),t.NdJ("ngModelChange",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.incident.ClosedDate=n)}),t.qZA(),t.TgZ(43,"span",16)(44,"button",17),t.NdJ("click",function(){t.CHM(e);const n=t.MAs(42);return t.KtG(n.show())}),t._UZ(45,"i",18),t.qZA()()()()(),t.YNc(46,I,4,2,"div",33),t.qZA()}if(2&r){const e=t.MAs(8),o=t.MAs(9),n=t.MAs(19),s=t.MAs(20),C=t.MAs(30),M=t.MAs(42),p=t.oxw();t.xp6(5),t.Q6J("ngClass",t.VKq(15,v,o.invalid&&(o.dirty||o.touched))),t.xp6(2),t.Q6J("bsConfig",p.datepickerConfig)("ngModel",p.incident.ReportingDate),t.xp6(4),t.uIk("aria-expanded",e.isOpen),t.xp6(5),t.Q6J("ngClass",t.VKq(17,v,s.invalid&&(s.dirty||s.touched))),t.xp6(2),t.Q6J("bsConfig",p.datepickerConfig)("ngModel",p.incident.ReceiptDate),t.xp6(4),t.uIk("aria-expanded",n.isOpen),t.xp6(2),t.Q6J("ngClass",t.VKq(19,v,C.invalid&&(C.dirty||C.touched))),t.xp6(5),t.Q6J("ngModel",p.incident.NameOfSubmitter),t.xp6(6),t.Q6J("ngModel",p.incident.AdditionalDetails),t.xp6(6),t.Q6J("bsConfig",p.datepickerConfig)("ngModel",p.incident.ClosedDate),t.xp6(3),t.uIk("aria-expanded",M.isOpen),t.xp6(2),t.Q6J("ngIf",p.mode!==p.constant.Action.Edit)}}let O=(()=>{class r{constructor(e,o,n,s,C,M){this.service=e,this.incidentService=o,this.router=n,this.bsModalRef=s,this.alertService=C,this.utilService=M,this.constant=_.s,this.datepickerConfig={dateInputFormat:_.s.DateFormatMoment,showTime:!1},this.originalData=null,this.saveNextText="Next Step",this.ID=0,this.mode=this.constant.Action.Create,this.onClose=new t.vpe,(this.utilService.isEmptyObject(this.service.incident)||this.service.incidentType!==this.constant.IncidentTypes.NoticeOfclaim)&&(this.service.incidentType=this.constant.IncidentTypes.NoticeOfclaim,this.initModel()),this.incident=this.service.incident}initModel(){this.service.incident={ID:0,GenericIncidentID:0,ReportingDate:void 0,ReceiptDate:void 0,NameOfSubmitter:"",AdditionalDetails:"",ClosedDate:void 0}}ngOnInit(){this.mode==this.constant.Action.Edit&&0!==this.ID&&this.incidentService.getGenericIncident(this.ID,this.constant.IncidentTypes.NoticeOfclaim).subscribe({next:e=>{this.incident={ID:e.ID,GenericIncidentID:e.GenericIncidentID,ReportedBy:e.ReportedBy,ReportingDate:this.utilService.toDateOrUndefined(e.ReportingDate),ReceiptDate:this.utilService.toDateOrUndefined(e.ReceiptDate),NameOfSubmitter:e.NameOfSubmitter,AdditionalDetails:e.AdditionalDetails,ClosedDate:this.utilService.toDateOrUndefined(e.ClosedDate)},this.originalData=this.utilService.toDeepCopy(this.incident)}})}nextStep(){this.router.navigate(["wizard","nocreview"])}isValidForm(){return!this.utilService.isEmptyString(this.incident.NameOfSubmitter)&&!this.utilService.isEmptyString(this.incident.ReceiptDate?.toString()??"")&&!this.utilService.isEmptyString(this.incident.ReportingDate?.toString()??"")}update(){this.incidentService.editGenericIncident(this.incident,this.constant.IncidentTypes.NoticeOfclaim).subscribe({next:e=>{this.onClose.emit(e),this.alertService.success("Successfully saved report."),this.bsModalRef?.hide()},error:e=>{this.alertService.error("Error saving report.")}})}close(){this.utilService.confirmIfIncidentIsDirty(this.originalData,this.incident,()=>{this.bsModalRef?.hide()})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(c.a),t.Y36(a.g),t.Y36(d.F0),t.Y36(l.UZ),t.Y36(g.c),t.Y36(b.F))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-noc"]],inputs:{ID:"ID",mode:"mode"},outputs:{onClose:"onClose"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["nocForm",""],[1,"modal-body"],["name","wizardForm"],[4,"ngTemplateOutlet"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["type","button",1,"btn","btn-cancel",3,"click"],[1,"well","form-horizontal"],[1,"form-group"],["for","reportingDate",1,"col-md-3","control-label"],[1,"glyphicon","glyphicon-asterisk","requiredColor"],[1,"col-md-3",3,"ngClass"],[1,"input-group"],["type","text","name","ReportingDate","id","reportingDate","placeholder","Reporting Date","bsDatepicker","","close-text","Close","required","",1,"form-control",3,"bsConfig","ngModel","ngModelChange"],["dpReportingDate","bsDatepicker","reportingDate","ngModel"],[1,"input-group-btn"],["type","button",1,"btn","btn-default",3,"click"],[1,"glyphicon","glyphicon-calendar"],["for","receiptDate",1,"col-md-3","control-label"],["type","text","name","ReceiptDate","id","receiptDate","placeholder","Receipt Date","bsDatepicker","","close-text","Close","required","",1,"form-control",3,"bsConfig","ngModel","ngModelChange"],["dpReceiptDate","bsDatepicker","receiptDate","ngModel"],[1,"form-group",3,"ngClass"],["for","NameOfSubmitter",1,"col-md-3","control-label"],[1,"col-md-9"],["type","text","id","NameOfSubmitter","name","NameOfSubmitter","required","",1,"form-control",3,"ngModel","ngModelChange"],["nameOfSubmitter","ngModel"],["for","AdditionalDetails",1,"col-md-3","control-label"],["id","AdditionalDetails","name","AdditionalDetails","rows","4",1,"form-control",3,"ngModel","ngModelChange"],["for","closeDate",1,"col-md-3","control-label"],[1,"col-md-3"],["type","text","name","ClosedDate","id","closeDate","placeholder","Close Date","bsDatepicker","","close-text","Close",1,"form-control",3,"bsConfig","ngModel","ngModelChange"],["dpCloseDate","bsDatepicker"],["class","form-group",4,"ngIf"],[1,"text-center"],[1,"btn","btn-primary",3,"disabled","click"]],template:function(e,o){if(1&e&&(t.YNc(0,T,9,2,"ng-container",0),t.YNc(1,A,47,21,"ng-template",null,1,t.W1O)),2&e){const n=t.MAs(2);t.Q6J("ngIf",o.mode===o.constant.Action.Edit)("ngIfElse",n)}},dependencies:[h.mk,h.O5,h.tP,m._Y,m.Fj,m.JJ,m.JL,m.Q7,m.On,m.F,x.Np,x.Y5]}),r})()}}]);