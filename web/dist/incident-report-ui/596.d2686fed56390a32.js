"use strict";(self.webpackChunkincident_report_ui=self.webpackChunkincident_report_ui||[]).push([[596],{3596:(fe,I,d)=>{d.r(I),d.d(I,{WizardModule:()=>ve});var s=d(6895),a=d(4006),m=d(2127),R=d(9699),U=d(3944),D=d(6482),e=d(1571);let w=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-exposure-review"]],decls:2,vars:0,template:function(t,n){1&t&&(e.TgZ(0,"p"),e._uU(1,"exposure-review works!"),e.qZA())}}),o})();var J=d(3071);function P(o,c){1&o&&(e.TgZ(0,"div",3)(1,"a",6),e._uU(2," Notice of Claim "),e.qZA()())}let F=(()=>{class o{constructor(t){this.service=t}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(J.K))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-incident-type"]],decls:8,vars:1,consts:[[1,"text-center"],[1,"row"],[1,"col-md-6","col-md-offset-3"],[1,"form-group"],["routerLink","/wizard/regular",1,"btn","btn-primary","form-control"],["class","form-group",4,"ngIf"],["routerLink","/wizard/noc",1,"btn","btn-primary","form-control"]],template:function(t,n){if(1&t&&(e.TgZ(0,"h4",0),e._uU(1,"What kind of report are you filing?"),e.qZA(),e.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"a",4),e._uU(6," Property/Vehicle Damage, Non-Employee Injury "),e.qZA()(),e.YNc(7,P,3,0,"div",5),e.qZA()()),2&t){let i;e.xp6(7),e.Q6J("ngIf",null!==(i=null==n.service.loggedInUser?null:n.service.loggedInUser.nocAllowed)&&void 0!==i&&i)}},dependencies:[s.O5,m.yS]}),o})(),O=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-injury-review"]],decls:2,vars:0,template:function(t,n){1&t&&(e.TgZ(0,"p"),e._uU(1,"injury-review works!"),e.qZA())}}),o})();var u=d(2831),f=d(5167),C=d(9805),v=d(426);let k=(()=>{class o{constructor(t,n,i,r){this.service=t,this.router=n,this.incidentService=i,this.alertService=r,this.constant=u.s,this.incident=this.service.incident}submitIncident(){this.incidentService.createGenericIncident(this.incident,this.constant.IncidentTypes.NoticeOfclaim).subscribe({next:t=>{this.alertService.success("Successfully submitted notice of claim report."),this.router.navigate([this.constant.IncidentRoutePaths.noticeofclaim,t.ID])},error:t=>{this.alertService.error("Error saving notice of claim report.")}})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(f.a),e.Y36(m.F0),e.Y36(C.g),e.Y36(v.c))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-nocreview"]],decls:39,vars:14,consts:[[1,"well","form-horizontal"],[1,"text-center"],[1,"form-group"],["for","ReportingDate",1,"col-md-3","control-label"],[1,"col-md-3"],[1,"form-control-static"],["for","ReceiptDate",1,"col-md-3","control-label"],["for","NameOfSubmitter",1,"col-md-3","control-label"],[1,"col-md-9"],["for","AdditionalDetails",1,"col-md-3","control-label"],["for","ClosedDate",1,"col-md-3","control-label"],[1,"btn","btn-primary",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"h3",1),e._uU(2,"Review Notice Of Claim Details"),e.qZA(),e.TgZ(3,"div",2)(4,"label",3),e._uU(5," Date of Loss "),e.qZA(),e.TgZ(6,"div",4)(7,"p",5),e._uU(8),e.ALo(9,"date"),e.qZA()(),e.TgZ(10,"label",6),e._uU(11," Date Received "),e.qZA(),e.TgZ(12,"div",4)(13,"p",5),e._uU(14),e.ALo(15,"date"),e.qZA()()(),e.TgZ(16,"div",2)(17,"label",7),e._uU(18," Name of Submitter "),e.qZA(),e.TgZ(19,"div",8)(20,"p",5),e._uU(21),e.qZA()()(),e.TgZ(22,"div",2)(23,"label",9),e._uU(24," Additional Details "),e.qZA(),e.TgZ(25,"div",8)(26,"p",5),e._uU(27),e.qZA()()(),e.TgZ(28,"div",2)(29,"label",10),e._uU(30," Closed Date "),e.qZA(),e.TgZ(31,"div",4)(32,"p",5),e._uU(33),e.ALo(34,"date"),e.qZA()()(),e.TgZ(35,"div",2)(36,"p",1)(37,"button",11),e.NdJ("click",function(){return n.submitIncident()}),e._uU(38,"Submit Notice of Claim"),e.qZA()()()()),2&t&&(e.xp6(8),e.Oqu(e.xi3(9,5,n.incident.ReportingDate,n.constant.DateFormatUi)),e.xp6(6),e.Oqu(e.xi3(15,8,n.incident.ReceiptDate,n.constant.DateFormatUi)),e.xp6(7),e.Oqu(n.incident.NameOfSubmitter),e.xp6(6),e.Oqu(n.incident.AdditionalDetails),e.xp6(6),e.Oqu(e.xi3(34,11,n.incident.ClosedDate,n.constant.DateFormatUi)))},dependencies:[s.uU]}),o})();var q=d(262),x=d(2843),Q=d(4128),E=d(3900),K=d(8746),b=d(8270);let N=(()=>{class o{constructor(t){this.utils=t}getSubIncident(t,n){const i=`api/${n.toLowerCase()}/${t}`;return this.utils.get(i)}createSubIncident(t,n){const i=`api/${n.toLowerCase()}`;return this.utils.post(i,t)}editSubIncident(t,n){const i=`api/${n.toLowerCase()}/${t.ID}`;return this.utils.put(i,t)}getPropertyDescriptions(){return this.utils.get("api/strings/allcityproperty")}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(b.F))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function G(o,c){if(1&o&&(e.TgZ(0,"tr")(1,"td")(2,"span",29),e._uU(3),e.qZA()(),e.TgZ(4,"td"),e._uU(5),e.qZA()()),2&o){const t=c.$implicit,n=e.oxw();e.xp6(2),e.Q6J("ngClass",n.getIncidentClass(t.type)),e.xp6(1),e.Oqu(t.type),e.xp6(2),e.Oqu(t.desc)}}let Y=(()=>{class o{constructor(t,n,i,r,l,g){this.service=t,this.incidentService=n,this.router=i,this.alertService=r,this.utilService=l,this.subIncidentService=g,this.constant=u.s,this.subincidents=[],this.incident=this.service.incident,this.subincidents=this.service.subIncidents}submitIncident(){this.incidentService.createGenericIncident(this.incident,"Incident").subscribe({next:t=>{const n=t.ID,i=[];for(let r=0;r<this.subincidents.length;r++){this.subincidents[r].IncidentInfoID=n;const l=this.subincidents[r].type.replace(/[\s-]+/g,""),g=this.subIncidentService.createSubIncident(this.subincidents[r],l).pipe((0,q.K)(h=>(this.alertService.error("Could not save all sub-incidents."),(0,x._)(()=>h))));i.push(g)}(0,Q.D)(i).pipe((0,E.w)(()=>this.incidentService.sendIncidentEmail(n)),(0,K.x)(()=>{this.alertService.success("Successfully submitted incident report."),this.router.navigate(["incident",n])}),(0,q.K)(r=>(this.alertService.error("Could not send incident email."),(0,x._)(()=>r)))).subscribe()},error:t=>{this.alertService.error("Error saving initial incident info.")}})}getIncidentClass(t){switch(t){case this.constant.IncidentTypeStringNames.recreation:return"label-primary";case this.constant.IncidentTypeStringNames.cityproperty:return"label-success";case this.constant.IncidentTypeStringNames.noncityproperty:return"label-default";case this.constant.IncidentTypeStringNames.cityvehicle:return"label-info";case this.constant.IncidentTypeStringNames.noncityvehicle:return"label-warning";case this.constant.IncidentTypeStringNames.nonemployeeinjury:return"label-danger";default:return"label-default"}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(f.a),e.Y36(C.g),e.Y36(m.F0),e.Y36(v.c),e.Y36(b.F),e.Y36(N))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-regular-review"]],decls:89,vars:20,consts:[[1,"well","form-horizontal"],[1,"text-center"],[1,"form-group"],["for","ReportingDate",1,"col-md-3","control-label"],[1,"col-lg-3","col-md-3"],[1,"form-control-static"],["for","IncidentDate",1,"col-md-3","control-label"],[1,"col-md-3"],["for","LocationOfIncident",1,"col-md-3","control-label"],[1,"col-md-9"],["for","City",1,"col-md-3","control-label"],[1,"col-lg-2","col-md-3"],["for","State",1,"col-lg-2","col-md-3","control-label"],[1,"col-lg-1","col-md-3"],["for","Zip",1,"col-lg-2","col-md-3","control-label"],["for","Description",1,"col-md-3","control-label"],["for","EmployeeInvolved",1,"col-md-3","control-label"],["for","PoliceReportFiled",1,"col-md-3","control-label"],[1,"radio-inline"],["type","radio","disabled","","value","true",3,"ngModel"],["type","radio","disabled","","value","false",3,"ngModel"],["for","ReportNum",1,"col-md-3","control-label"],["for","WherePDReportFiled",1,"col-md-3","control-label"],[1,"panel","panel-default"],[1,"panel-heading"],[1,"table"],["width","10%"],[4,"ngFor","ngForOf"],[1,"btn","btn-primary",3,"disabled","click"],[1,"label",3,"ngClass"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"h3",1),e._uU(2,"Review Incident Information"),e.qZA(),e.TgZ(3,"div",2)(4,"label",3),e._uU(5," Reporting Date "),e.qZA(),e.TgZ(6,"div",4)(7,"p",5),e._uU(8),e.ALo(9,"date"),e.qZA()(),e.TgZ(10,"label",6),e._uU(11," Date of Incident "),e.qZA(),e.TgZ(12,"div",7)(13,"p",5),e._uU(14),e.ALo(15,"date"),e.qZA()()(),e.TgZ(16,"div",2)(17,"label",8),e._uU(18," Location of Incident "),e.qZA(),e.TgZ(19,"div",9)(20,"p",5),e._uU(21),e.qZA()()(),e.TgZ(22,"div",2)(23,"label",10),e._uU(24," City "),e.qZA(),e.TgZ(25,"div",11)(26,"p",5),e._uU(27),e.qZA()(),e.TgZ(28,"label",12),e._uU(29," State "),e.qZA(),e.TgZ(30,"div",13)(31,"p",5),e._uU(32),e.qZA()(),e.TgZ(33,"label",14),e._uU(34," Zip "),e.qZA(),e.TgZ(35,"div",11)(36,"p",5),e._uU(37),e.qZA()()(),e.TgZ(38,"div",2)(39,"label",15),e._uU(40," Describe what happened "),e.qZA(),e.TgZ(41,"div",9)(42,"p",5),e._uU(43),e.qZA()()(),e.TgZ(44,"div",2)(45,"label",16),e._uU(46," Employee involved in incident "),e.qZA(),e.TgZ(47,"div",9)(48,"p",5),e._uU(49),e.qZA()()(),e.TgZ(50,"div",2)(51,"label",17),e._uU(52,"Was a Police Report Filed?"),e.qZA(),e.TgZ(53,"div",9)(54,"label",18),e._UZ(55,"input",19),e._uU(56,"Yes "),e.qZA(),e.TgZ(57,"label",18),e._UZ(58,"input",20),e._uU(59,"No "),e.qZA()()(),e.TgZ(60,"div",2)(61,"label",21),e._uU(62,"Report #"),e.qZA(),e.TgZ(63,"div",9)(64,"p",5),e._uU(65),e.qZA()()(),e.TgZ(66,"div",2)(67,"label",22),e._uU(68,"Where Filed?"),e.qZA(),e.TgZ(69,"div",9)(70,"p",5),e._uU(71),e.qZA()()(),e.TgZ(72,"div",23)(73,"div",24)(74,"h4"),e._uU(75,"Attached Sub-Incidents"),e.qZA()(),e.TgZ(76,"table",25)(77,"thead")(78,"tr")(79,"th",26),e._uU(80,"Incident Type"),e.qZA(),e.TgZ(81,"th"),e._uU(82,"Description"),e.qZA()()(),e.TgZ(83,"tbody"),e.YNc(84,G,6,3,"tr",27),e.qZA()()(),e.TgZ(85,"div",2)(86,"p",1)(87,"button",28),e.NdJ("click",function(){return n.submitIncident()}),e._uU(88,"Submit Incident Report"),e.qZA()()()()),2&t&&(e.xp6(8),e.Oqu(e.xi3(9,14,n.incident.ReportingDate,n.constant.DateFormatUi)),e.xp6(6),e.Oqu(e.xi3(15,17,n.incident.IncidentDate,n.constant.DateFormatUi)),e.xp6(7),e.Oqu(n.incident.LocationOfIncident),e.xp6(6),e.Oqu(n.incident.City),e.xp6(5),e.Oqu(n.incident.State),e.xp6(5),e.Oqu(n.incident.Zip),e.xp6(6),e.Oqu(n.incident.Description),e.xp6(6),e.Oqu(n.incident.EmployeeInvolved),e.xp6(6),e.Q6J("ngModel",n.incident.PoliceReportFiled),e.xp6(3),e.Q6J("ngModel",n.incident.PoliceReportFiled),e.xp6(7),e.Oqu(n.incident.ReportNum),e.xp6(6),e.Oqu(n.incident.WherePDReportFiled),e.xp6(13),e.Q6J("ngForOf",n.subincidents),e.xp6(3),e.Q6J("disabled",0===n.subincidents.length))},dependencies:[s.mk,s.sg,a.Fj,a._,a.JJ,a.On,s.uU]}),o})();var y=d(388),Z=d(6455),z=d(4447),T=d(7538);function H(o,c){1&o&&e._UZ(0,"div")}function L(o,c){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",2)(2,"form",3),e.YNc(3,H,1,0,"div",4),e.qZA()(),e.TgZ(4,"div",5)(5,"button",6),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.update())}),e._uU(6,"Save"),e.qZA(),e.TgZ(7,"button",7),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.close())}),e._uU(8,"Cancel"),e.qZA()(),e.BQk()}if(2&o){const t=e.oxw(),n=e.MAs(2);e.xp6(3),e.Q6J("ngTemplateOutlet",n),e.xp6(2),e.Q6J("disabled",!t.isValidForm())}}function W(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"li")(1,"a",59),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.incident.LocationOfIncident=r.Name)}),e._uU(2),e.qZA()()}if(2&o){const t=c.$implicit;e.xp6(2),e.Oqu(t.Name)}}function V(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"li")(1,"a",59),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.incident.WherePDReportFiled=r.Name)}),e._uU(2),e.qZA()()}if(2&o){const t=c.$implicit;e.xp6(2),e.Oqu(t.Name)}}function $(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"div",10)(1,"div",9)(2,"button",60),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.nextStep())}),e._uU(3),e.qZA()()()}if(2&o){const t=e.oxw(2);e.xp6(2),e.Q6J("disabled",!t.isValidForm()),e.xp6(1),e.Oqu(t.saveNextText)}}const _=function(o){return{"has-error":o}};function j(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"div",8)(1,"h3",9),e._uU(2,"Incident Information"),e.qZA(),e.TgZ(3,"div",10)(4,"label",11),e._uU(5," Reporting Date "),e._UZ(6,"span",12),e.qZA(),e.TgZ(7,"div",13)(8,"p",14)(9,"input",15,16),e.NdJ("ngModelChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.incident.ReportingDate=i)}),e.qZA(),e.TgZ(12,"span",17)(13,"button",18),e.NdJ("click",function(){e.CHM(t);const i=e.MAs(10);return e.KtG(i.show())}),e._UZ(14,"i",19),e.qZA()()()(),e.TgZ(15,"label",20),e._uU(16," Date of Incident "),e._UZ(17,"span",12),e.qZA(),e.TgZ(18,"div",13)(19,"p",14)(20,"input",21,22),e.NdJ("ngModelChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.incident.IncidentDate=i)}),e.qZA(),e.TgZ(23,"span",17)(24,"button",18),e.NdJ("click",function(){e.CHM(t);const i=e.MAs(21);return e.KtG(i.show())}),e._UZ(25,"i",19),e.qZA()()()()(),e.TgZ(26,"div",10)(27,"label",23),e._uU(28," Location of Incident "),e._UZ(29,"span",12),e.qZA(),e.TgZ(30,"div",24)(31,"div",25)(32,"input",26,27),e.NdJ("ngModelChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.incident.LocationOfIncident=i)}),e.qZA(),e.TgZ(34,"div",17)(35,"button",28),e._uU(36," Common Locations "),e._UZ(37,"span",29),e.qZA(),e.TgZ(38,"ul",30),e.YNc(39,W,3,1,"li",31),e.qZA()()()()(),e.TgZ(40,"div",10)(41,"label",32),e._uU(42," City "),e._UZ(43,"span",12),e.qZA(),e.TgZ(44,"div",13)(45,"input",33,34),e.NdJ("ngModelChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.incident.City=i)}),e.qZA()(),e.TgZ(47,"label",35),e._uU(48," State "),e._UZ(49,"span",12),e.qZA(),e.TgZ(50,"div",36)(51,"input",37,38),e.NdJ("ngModelChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.incident.State=i)}),e.qZA()(),e.TgZ(53,"label",39),e._uU(54," Zip "),e._UZ(55,"span",12),e.qZA(),e.TgZ(56,"div",40)(57,"input",41,42),e.NdJ("ngModelChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.incident.Zip=i)}),e.qZA()()(),e.TgZ(59,"div",10)(60,"label",43),e._uU(61," Describe what happened "),e._UZ(62,"span",12),e.qZA(),e.TgZ(63,"div",44)(64,"textarea",45,46),e.NdJ("ngModelChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.incident.Description=i)}),e.qZA()()(),e.TgZ(66,"div",10)(67,"label",47),e._uU(68," Employee involved in incident "),e.qZA(),e.TgZ(69,"div",24)(70,"user-picker",48),e.NdJ("valueChanged",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.incident.EmployeeInvolved=i)}),e.qZA()()(),e.TgZ(71,"div",10)(72,"label",49),e._uU(73,"Was a Police Report Filed?"),e.qZA(),e.TgZ(74,"div",50)(75,"label",51)(76,"input",52),e.NdJ("ngModelChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.incident.PoliceReportFiled=i)}),e.qZA(),e._uU(77,"Yes "),e.qZA(),e.TgZ(78,"label",51)(79,"input",53),e.NdJ("ngModelChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.incident.PoliceReportFiled=i)}),e.qZA(),e._uU(80,"No "),e.qZA()(),e.TgZ(81,"label",54),e._uU(82,"Report #"),e.qZA(),e.TgZ(83,"div",50)(84,"input",55),e.NdJ("ngModelChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.incident.ReportNum=i)}),e.qZA()()(),e.TgZ(85,"div",10)(86,"label",56),e._uU(87,"Where Filed?"),e.qZA(),e.TgZ(88,"div",24)(89,"div",14)(90,"input",57),e.NdJ("ngModelChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.incident.WherePDReportFiled=i)}),e.qZA(),e.TgZ(91,"div",17)(92,"button",28),e._uU(93," Common Locations "),e._UZ(94,"span",29),e.qZA(),e.TgZ(95,"ul",30),e.YNc(96,V,3,1,"li",31),e.qZA()()()()(),e.YNc(97,$,4,2,"div",58),e.qZA()}if(2&o){const t=e.MAs(10),n=e.MAs(11),i=e.MAs(21),r=e.MAs(22),l=e.MAs(33),g=e.MAs(46),h=e.MAs(52),M=e.MAs(58),A=e.MAs(65),p=e.oxw();e.xp6(7),e.Q6J("ngClass",e.VKq(25,_,n.invalid&&(n.dirty||n.touched))),e.xp6(2),e.Q6J("bsConfig",p.datepickerConfig)("ngModel",p.incident.ReportingDate),e.xp6(4),e.uIk("aria-expanded",t.isOpen),e.xp6(5),e.Q6J("ngClass",e.VKq(27,_,r.invalid&&(r.dirty||r.touched))),e.xp6(2),e.Q6J("bsConfig",p.datepickerConfig)("ngModel",p.incident.IncidentDate),e.xp6(4),e.uIk("aria-expanded",i.isOpen),e.xp6(7),e.Q6J("ngClass",e.VKq(29,_,l.invalid&&(l.dirty||l.touched))),e.xp6(1),e.Q6J("ngModel",p.incident.LocationOfIncident),e.xp6(7),e.Q6J("ngForOf",p.locations),e.xp6(5),e.Q6J("ngClass",e.VKq(31,_,g.invalid&&(g.dirty||g.touched))),e.xp6(1),e.Q6J("ngModel",p.incident.City),e.xp6(5),e.Q6J("ngClass",e.VKq(33,_,h.invalid&&(h.dirty||h.touched))),e.xp6(1),e.Q6J("ngModel",p.incident.State),e.xp6(5),e.Q6J("ngClass",e.VKq(35,_,M.invalid&&(M.dirty||M.touched))),e.xp6(1),e.Q6J("ngModel",p.incident.Zip),e.xp6(6),e.Q6J("ngClass",e.VKq(37,_,A.invalid&&(A.dirty||A.touched))),e.xp6(1),e.Q6J("ngModel",p.incident.Description),e.xp6(12),e.Q6J("ngModel",p.incident.PoliceReportFiled),e.xp6(3),e.Q6J("ngModel",p.incident.PoliceReportFiled),e.xp6(5),e.Q6J("ngModel",p.incident.ReportNum),e.xp6(6),e.Q6J("ngModel",p.incident.WherePDReportFiled),e.xp6(6),e.Q6J("ngForOf",p.pdLocations),e.xp6(1),e.Q6J("ngIf",p.mode!==p.constant.Action.Edit)}}let B=(()=>{class o{constructor(t,n,i,r,l,g,h){this.service=t,this.incidentService=n,this.router=i,this.bsModalRef=r,this.alertService=l,this.utilService=g,this.stringService=h,this.constant=u.s,this.datepickerConfig={dateInputFormat:u.s.DateFormatMoment,showTime:!1},this.originalData=null,this.saveNextText="Next Step",this.ID=0,this.mode=this.constant.Action.Create,this.onClose=new e.vpe,this.locations=[],this.pdLocations=[],(this.utilService.isEmptyObject(this.service.incident)||this.service.incidentType!==this.constant.IncidentTypes.Incident)&&(this.service.incidentType=this.constant.IncidentTypes.Incident,this.initModel()),this.incident=this.service.incident}initModel(){this.service.incident={ID:0,GenericIncidentID:0,ReportingDate:void 0,IncidentDate:void 0,LocationOfIncident:"",City:"",State:"",Zip:"",Description:"",EmployeeInvolved:"",PoliceReportFiled:!1,ReportNum:"",WherePDReportFiled:"",Editing:!1}}ngOnInit(){this.incident.City="Goodyear",this.incident.State="AZ",this.incident.Zip="85338",this.stringService.getStrings(u.s.StringTypes.locations).subscribe({next:t=>{this.locations=t}}),this.stringService.getStrings(u.s.StringTypes.pdlocations).subscribe({next:t=>{this.pdLocations=t}}),this.mode==this.constant.Action.Edit&&0!==this.ID&&this.incidentService.getGenericIncident(this.ID,this.constant.IncidentTypes.Incident).subscribe({next:t=>{this.originalData=this.utilService.toDeepCopy(this.incident)}})}nextStep(){this.router.navigate(["wizard","subincidents"])}isValidForm(){return!(this.utilService.isEmptyString(this.incident.LocationOfIncident)||this.utilService.isEmptyString(this.incident.State)||this.utilService.isEmptyString(this.incident.City)||this.utilService.isEmptyString(this.incident.Zip)||this.utilService.isEmptyString(this.incident.Description)||this.utilService.isEmptyString(this.incident.ReportingDate?.toString()??"")||this.utilService.isEmptyString(this.incident.IncidentDate?.toString()??""))}update(){this.incidentService.editGenericIncident(this.incident,this.constant.IncidentTypes.Incident).subscribe({next:t=>{this.onClose.emit(t),this.alertService.success("Successfully saved report."),this.bsModalRef?.hide()},error:t=>{this.alertService.error("Error saving report.")}})}close(){this.utilService.confirmIfIncidentIsDirty(this.originalData,this.incident,()=>{this.bsModalRef?.hide()})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(f.a),e.Y36(C.g),e.Y36(m.F0),e.Y36(y.UZ),e.Y36(v.c),e.Y36(b.F),e.Y36(Z.N))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-regular"]],inputs:{ID:"ID",mode:"mode"},outputs:{onClose:"onClose"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["incidentForm",""],[1,"modal-body"],["name","wizardForm"],[4,"ngTemplateOutlet"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"disabled","click"],["type","button",1,"btn","btn-cancel",3,"click"],[1,"well","form-horizontal"],[1,"text-center"],[1,"form-group"],["for","reportingDate",1,"col-md-3","control-label"],[1,"glyphicon","glyphicon-asterisk","requiredColor"],[1,"col-md-3",3,"ngClass"],[1,"input-group"],["type","text","name","ReportingDate","id","reportingDate","placeholder","Reporting Date","bsDatepicker","","close-text","Close","required","",1,"form-control",3,"bsConfig","ngModel","ngModelChange"],["dpReportingDate","bsDatepicker","reportingDate","ngModel"],[1,"input-group-btn"],["type","button",1,"btn","btn-default",3,"click"],[1,"glyphicon","glyphicon-calendar"],["for","incidentDate",1,"col-md-3","control-label"],["type","text","name","incidentDate","id","incidentDate","placeholder","Date of Incident","bsDatepicker","","close-text","Close","required","",1,"form-control",3,"bsConfig","ngModel","ngModelChange"],["dpIncidentDate","bsDatepicker","incidentDate","ngModel"],["for","LocationOfIncident",1,"col-md-3","control-label"],[1,"col-md-9"],[1,"input-group",3,"ngClass"],["type","text","id","LocationOfIncident","name","LocationOfIncident","placeholder","Choose an option from the right or enter a different value...","required","",1,"form-control",3,"ngModel","ngModelChange"],["locationOfIncident","ngModel"],["type","button","data-toggle","dropdown",1,"btn","btn-default","dropdown-toggle"],[1,"caret"],["role","menu",1,"dropdown-menu","dropdown-menu-right"],[4,"ngFor","ngForOf"],["for","City",1,"col-md-3","control-label"],["type","text","id","City","name","City","required","",1,"form-control",3,"ngModel","ngModelChange"],["city","ngModel"],["for","State",1,"col-md-2","control-label"],[1,"col-md-1",3,"ngClass"],["type","text","id","State","name","State","required","",1,"form-control",3,"ngModel","ngModelChange"],["state","ngModel"],["for","Zip",1,"col-md-1","control-label"],[1,"col-md-2",3,"ngClass"],["type","text","id","Zip","name","Zip","required","",1,"form-control",3,"ngModel","ngModelChange"],["zip","ngModel"],["for","Description",1,"col-md-3","control-label"],[1,"col-md-9",3,"ngClass"],["id","Description","name","Description","rows","4","required","",1,"form-control",3,"ngModel","ngModelChange"],["description","ngModel"],["for","EmployeeInvolved",1,"col-md-3","control-label"],[3,"valueChanged"],["for","PoliceReportFiled",1,"col-md-3","control-label"],[1,"col-md-3"],[1,"radio-inline"],["type","radio","value","true",3,"ngModel","ngModelChange"],["type","radio","value","false",3,"ngModel","ngModelChange"],["for","ReportNum",1,"col-md-3","control-label"],["type","text","id","ReportNum",1,"form-control",3,"ngModel","ngModelChange"],["for","WherePDReportFiled",1,"col-md-3","control-label"],["type","text","id","WherePDReportFiled",1,"form-control",3,"ngModel","ngModelChange"],["class","form-group",4,"ngIf"],[3,"click"],[1,"btn","btn-primary",3,"disabled","click"]],template:function(t,n){if(1&t&&(e.YNc(0,L,9,2,"ng-container",0),e.YNc(1,j,98,39,"ng-template",null,1,e.W1O)),2&t){const i=e.MAs(2);e.Q6J("ngIf",n.mode===n.constant.Action.Edit)("ngIfElse",i)}},dependencies:[s.mk,s.sg,s.O5,s.tP,a._Y,a.Fj,a._,a.JJ,a.JL,a.Q7,a.On,a.F,z.S,T.Np,T.Y5]}),o})();function X(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"div",2)(1,"div",44)(2,"button",45),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.saveSub(i.constant.IncidentTypeStringNames.recreation,i.currentSub.Location))}),e._uU(3,"Save Recreation Details"),e.qZA(),e.TgZ(4,"a",46),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.cancelSub())}),e._uU(5,"Cancel"),e.qZA()()()}if(2&o){e.oxw();const t=e.MAs(23);e.xp6(2),e.Q6J("disabled",t.invalid)}}const ee=function(o){return{"has-error":o}};let te=(()=>{class o{constructor(t,n,i){this.service=t,this.alertService=n,this.bsModalRef=i,this.constant=u.s,this.onSaveSub=new e.vpe,this.onCancelSub=new e.vpe,this.mode=void 0}cancelSub(){this.onCancelSub.emit(this.constant.IncidentTypeStringNames.recreation)}closeModal(){this.bsModalRef?.hide()}saveSub(t,n){this.currentSub.type=t,this.currentSub.desc=n,this.onSaveSub.emit(this.currentSub)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Z.N),e.Y36(v.c),e.Y36(y.UZ))},o.\u0275cmp=e.Xpm({type:o,selectors:[["recreation-modal"]],inputs:{currentSub:"currentSub"},outputs:{onSaveSub:"onSaveSub",onCancelSub:"onCancelSub"},decls:85,vars:19,consts:[[1,"well","form-horizontal"],[1,"text-center"],[1,"form-group"],["for","ParentOrGuardianName",1,"col-md-3","control-label"],[1,"col-md-6"],["type","text","id","ParentOrGuardianName",1,"form-control",3,"ngModel","ngModelChange"],["for","RecIncident.AgeOfParticipant",1,"col-md-2","control-label"],[1,"col-md-1"],["type","text","id","RecIncident.AgeOfParticipant",1,"form-control",3,"ngModel","ngModelChange"],["for","ProgramName",1,"col-md-3","control-label"],[1,"col-md-9"],["type","text","id","ProgramName",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-group","has-feedback"],["for","Location",1,"col-md-3","control-label"],[1,"glyphicon","glyphicon-asterisk","requiredColor"],[1,"col-md-9",3,"ngClass"],["type","text","id","Location","name","Location","required","",1,"form-control",3,"ngModel","ngModelChange"],["location","ngModel"],["for","NumberProgramParticipants",1,"col-md-3","control-label"],[1,"col-md-2"],["type","text","id","NumberProgramParticipants",1,"form-control",3,"ngModel","ngModelChange"],["for","ProgramSupervisoryRatio",1,"col-md-3","control-label"],["type","text","id","ProgramSupervisoryRatio",1,"form-control",3,"ngModel","ngModelChange"],["for","Equipment",1,"col-md-3","control-label"],[1,"col-md-3"],["type","text","id","Equipment",1,"form-control",3,"ngModel","ngModelChange"],["for","AttendedByDoctorName",1,"col-md-1","control-label"],[1,"col-md-4"],["type","text","id","AttendedByDoctorName",1,"form-control",3,"ngModel","ngModelChange"],["for","AttendedByDoctorTime",1,"col-md-2","control-label"],["type","text","id","AttendedByDoctorTime",1,"form-control",3,"ngModel","ngModelChange"],["for","RemovedToHospitalName",1,"col-md-1","control-label"],["type","text","id","RemovedToHospitalName",1,"form-control",3,"ngModel","ngModelChange"],["for","RemovedToHospitalTime",1,"col-md-2","control-label"],["type","text","id","RemovedToHospitalTime",1,"form-control",3,"ngModel","ngModelChange"],["for","ParentNotifiedName",1,"col-md-1","control-label"],["type","text","id","ParentNotifiedName",1,"form-control",3,"ngModel","ngModelChange"],["for","ParentNotifiedTime",1,"col-md-2","control-label"],["type","text","id","ParentNotifiedTime",1,"form-control",3,"ngModel","ngModelChange"],["for","ParentPickupName",1,"col-md-1","control-label"],["type","text","id","ParentPickupName",1,"form-control",3,"ngModel","ngModelChange"],["for","ParentPickupTime",1,"col-md-2","control-label"],["type","text","id","ParentPickupTime",1,"form-control",3,"ngModel","ngModelChange"],["class","form-group",4,"ngIf"],[1,"col-md-offset-3"],[1,"btn","btn-default",3,"disabled","click"],[1,"btn","btn-warning",3,"click"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"h3",1),e._uU(2,"Recreation Participant Details"),e.qZA(),e.TgZ(3,"div",2)(4,"label",3),e._uU(5,"Parent/Guardian Name"),e.qZA(),e.TgZ(6,"div",4)(7,"input",5),e.NdJ("ngModelChange",function(r){return n.currentSub.ParentOrGuardianName=r}),e.qZA()(),e.TgZ(8,"label",6),e._uU(9,"Age of Participant"),e.qZA(),e.TgZ(10,"div",7)(11,"input",8),e.NdJ("ngModelChange",function(r){return n.currentSub.AgeOfParticipant=r}),e.qZA()()(),e.TgZ(12,"div",2)(13,"label",9),e._uU(14,"Program Name"),e.qZA(),e.TgZ(15,"div",10)(16,"input",11),e.NdJ("ngModelChange",function(r){return n.currentSub.ProgramName=r}),e.qZA()()(),e.TgZ(17,"div",12)(18,"label",13),e._uU(19," Location "),e._UZ(20,"span",14),e.qZA(),e.TgZ(21,"div",15)(22,"input",16,17),e.NdJ("ngModelChange",function(r){return n.currentSub.Location=r}),e.qZA()()(),e.TgZ(24,"div",2)(25,"label",18),e._uU(26,"# of Program Participants"),e.qZA(),e.TgZ(27,"div",19)(28,"input",20),e.NdJ("ngModelChange",function(r){return n.currentSub.NumberProgramParticipants=r}),e.qZA()(),e.TgZ(29,"label",21),e._uU(30,"Program Supervisory Ratio"),e.qZA(),e.TgZ(31,"div",19)(32,"input",22),e.NdJ("ngModelChange",function(r){return n.currentSub.ProgramSupervisoryRatio=r}),e.qZA()()(),e.TgZ(33,"div",2)(34,"label",23),e._uU(35,"Equipment"),e.qZA(),e.TgZ(36,"div",24)(37,"input",25),e.NdJ("ngModelChange",function(r){return n.currentSub.Equipment=r}),e.qZA()()(),e.TgZ(38,"h4"),e._uU(39,"Fill in where applicable"),e.qZA(),e.TgZ(40,"div",2)(41,"div",24),e._uU(42," Attended by Doctor: "),e.qZA(),e.TgZ(43,"label",26),e._uU(44,"Name"),e.qZA(),e.TgZ(45,"div",27)(46,"input",28),e.NdJ("ngModelChange",function(r){return n.currentSub.AttendedByDoctorName=r}),e.qZA()(),e.TgZ(47,"label",29),e._uU(48,"Time"),e.qZA(),e.TgZ(49,"div",19)(50,"input",30),e.NdJ("ngModelChange",function(r){return n.currentSub.AttendedByDoctorTime=r}),e.qZA()()(),e.TgZ(51,"div",2)(52,"div",24),e._uU(53," Removed To Hospital: "),e.qZA(),e.TgZ(54,"label",31),e._uU(55,"Name"),e.qZA(),e.TgZ(56,"div",27)(57,"input",32),e.NdJ("ngModelChange",function(r){return n.currentSub.RemovedToHospitalName=r}),e.qZA()(),e.TgZ(58,"label",33),e._uU(59,"Time"),e.qZA(),e.TgZ(60,"div",19)(61,"input",34),e.NdJ("ngModelChange",function(r){return n.currentSub.RemovedToHospitalTime=r}),e.qZA()()(),e.TgZ(62,"div",2)(63,"div",24),e._uU(64," Parent Notified: "),e.qZA(),e.TgZ(65,"label",35),e._uU(66,"Name"),e.qZA(),e.TgZ(67,"div",27)(68,"input",36),e.NdJ("ngModelChange",function(r){return n.currentSub.ParentNotifiedName=r}),e.qZA()(),e.TgZ(69,"label",37),e._uU(70,"Time"),e.qZA(),e.TgZ(71,"div",19)(72,"input",38),e.NdJ("ngModelChange",function(r){return n.currentSub.ParentNotifiedTime=r}),e.qZA()()(),e.TgZ(73,"div",2)(74,"div",24),e._uU(75," Parent/person who picked up child: "),e.qZA(),e.TgZ(76,"label",39),e._uU(77,"Name"),e.qZA(),e.TgZ(78,"div",27)(79,"input",40),e.NdJ("ngModelChange",function(r){return n.currentSub.ParentPickupName=r}),e.qZA()(),e.TgZ(80,"label",41),e._uU(81,"Time"),e.qZA(),e.TgZ(82,"div",19)(83,"input",42),e.NdJ("ngModelChange",function(r){return n.currentSub.ParentPickupTime=r}),e.qZA()()(),e.YNc(84,X,6,1,"div",43),e.qZA()),2&t){const i=e.MAs(23);e.xp6(7),e.Q6J("ngModel",n.currentSub.ParentOrGuardianName),e.xp6(4),e.Q6J("ngModel",n.currentSub.AgeOfParticipant),e.xp6(5),e.Q6J("ngModel",n.currentSub.ProgramName),e.xp6(5),e.Q6J("ngClass",e.VKq(17,ee,i.invalid&&(i.dirty||i.touched))),e.xp6(1),e.Q6J("ngModel",n.currentSub.Location),e.xp6(6),e.Q6J("ngModel",n.currentSub.NumberProgramParticipants),e.xp6(4),e.Q6J("ngModel",n.currentSub.ProgramSupervisoryRatio),e.xp6(5),e.Q6J("ngModel",n.currentSub.Equipment),e.xp6(9),e.Q6J("ngModel",n.currentSub.AttendedByDoctorName),e.xp6(4),e.Q6J("ngModel",n.currentSub.AttendedByDoctorTime),e.xp6(7),e.Q6J("ngModel",n.currentSub.RemovedToHospitalName),e.xp6(4),e.Q6J("ngModel",n.currentSub.RemovedToHospitalTime),e.xp6(7),e.Q6J("ngModel",n.currentSub.ParentNotifiedName),e.xp6(4),e.Q6J("ngModel",n.currentSub.ParentNotifiedTime),e.xp6(7),e.Q6J("ngModel",n.currentSub.ParentPickupName),e.xp6(4),e.Q6J("ngModel",n.currentSub.ParentPickupTime),e.xp6(1),e.Q6J("ngIf",!n.mode)}},dependencies:[s.mk,s.O5,a.Fj,a.JJ,a.Q7,a.On]}),o})();function ne(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"li")(1,"a",38),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw().$implicit;return e.KtG(l.PropertyDescription=r.Name)}),e._uU(2),e.qZA()()}if(2&o){const t=c.$implicit;e.xp6(2),e.Oqu(t.Name)}}function ie(o,c){1&o&&(e.TgZ(0,"span"),e._uU(1,"Digits only"),e.qZA())}const S=function(o){return{"has-error":o}};function oe(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"div",17)(1,"form",18)(2,"div",7)(3,"div",19)(4,"label",20),e._uU(5," Property Description "),e._UZ(6,"span",12),e.qZA(),e.TgZ(7,"div",21)(8,"div",22)(9,"input",23,24),e.NdJ("ngModelChange",function(i){const l=e.CHM(t).$implicit;return e.KtG(l.PropertyDescription=i)}),e.qZA(),e.TgZ(11,"div",25)(12,"button",26),e._uU(13," Common Descriptions "),e._UZ(14,"span",27),e.qZA(),e.TgZ(15,"ul",28),e.YNc(16,ne,3,1,"li",29),e.qZA()()()()()(),e.TgZ(17,"div",7)(18,"label",20),e._uU(19,"Serial Tag"),e.qZA(),e.TgZ(20,"div",8)(21,"input",30),e.NdJ("ngModelChange",function(i){const l=e.CHM(t).$implicit;return e.KtG(l.SerialTag=i)}),e.qZA()(),e.TgZ(22,"div",31)(23,"input",32),e.NdJ("ngModelChange",function(i){const l=e.CHM(t).$implicit;return e.KtG(l.RepairReplace=i)}),e.qZA(),e._uU(24,"Repair "),e.TgZ(25,"input",33),e.NdJ("ngModelChange",function(i){const l=e.CHM(t).$implicit;return e.KtG(l.RepairReplace=i)}),e.qZA(),e._uU(26,"Replace "),e.qZA()(),e.TgZ(27,"div",7)(28,"label",20),e._uU(29,"Actual Damage $"),e.qZA(),e.TgZ(30,"div",34)(31,"input",35,36),e.NdJ("ngModelChange",function(i){const l=e.CHM(t).$implicit;return e.KtG(l.ActualDamage=i)}),e.qZA(),e.YNc(33,ie,2,0,"span",37),e.qZA()()()()}if(2&o){const t=c.$implicit,n=c.index,i=e.MAs(10),r=e.MAs(32),l=e.oxw();e.xp6(3),e.Q6J("ngClass",e.VKq(19,S,i.invalid&&(i.dirty||i.touched))),e.xp6(1),e.MGl("for","PropertyDescription",n,""),e.xp6(5),e.MGl("name","PropertyDescription",n,""),e.Q6J("ngModel",t.PropertyDescription),e.xp6(7),e.Q6J("ngForOf",l.descriptions),e.xp6(2),e.MGl("for","SerialTag",n,""),e.xp6(3),e.MGl("name","SerialTag",n,"")("id","SerialTag",n,""),e.Q6J("ngModel",t.SerialTag),e.xp6(2),e.MGl("name","RepairReplace",n,""),e.Q6J("ngModel",t.RepairReplace),e.xp6(2),e.MGl("name","RepairReplace",n,""),e.Q6J("ngModel",t.RepairReplace),e.xp6(3),e.MGl("for","ActualDamage",n,""),e.xp6(2),e.Q6J("ngClass",e.VKq(21,S,r.invalid&&(r.dirty||r.touched))),e.xp6(1),e.MGl("id","ActualDamage",n,"")("name","ActualDamage",n,""),e.Q6J("ngModel",t.ActualDamage),e.xp6(2),e.Q6J("ngIf",r.invalid)}}function re(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"div",7)(1,"div",39)(2,"button",40),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.saveSub(i.constant.IncidentTypeStringNames.cityproperty,i.currentSub.EventDescription))}),e._uU(3,"Save City Property Details"),e.qZA(),e.TgZ(4,"a",41),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.cancelSub())}),e._uU(5,"Cancel"),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(2),e.Q6J("disabled",!t.isValidForm())}}let ce=(()=>{class o{constructor(t,n,i,r){this.service=t,this.utilService=n,this.alertService=i,this.bsModalRef=r,this.constant=u.s,this.onSaveSub=new e.vpe,this.onCancelSub=new e.vpe,this.mode=void 0,this.descriptions=[]}ngOnInit(){this.service.getPropertyDescriptions().subscribe({next:t=>{this.descriptions=t}})}closeModal(){this.bsModalRef?.hide()}cancelSub(){this.onCancelSub.emit(this.constant.IncidentTypeStringNames.cityproperty)}saveSub(t,n){this.currentSub.type=t,this.currentSub.desc=n,this.onSaveSub.emit(this.currentSub)}addDamageInfo(){this.currentSub.DamageInfos.push({})}isValidForm(){return this.isValidDamageInfos()&&!this.utilService.isEmptyString(this.currentSub.EventDescription)}isValidDamageInfos(){let t=!0;return this.currentSub.DamageInfos&&this.currentSub.DamageInfos.length>0&&this.currentSub.DamageInfos.forEach(n=>{this.utilService.isEmptyString(n.PropertyDescription)&&(t=!1),n.ActualDamage&&!this.utilService.isValidNumber(n.ActualDamage)&&(t=!1)}),t}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(N),e.Y36(b.F),e.Y36(v.c),e.Y36(y.UZ))},o.\u0275cmp=e.Xpm({type:o,selectors:[["city-property-model"]],inputs:{currentSub:"currentSub"},outputs:{onSaveSub:"onSaveSub",onCancelSub:"onCancelSub"},decls:21,vars:6,consts:[[1,"well","form-horizontal"],[1,"text-center"],[1,"panel","panel-default"],[1,"panel-heading"],[1,"list-group"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"panel-footer"],[1,"form-group"],[1,"col-md-2"],[1,"btn","btn-primary",3,"click"],[1,"form-group",3,"ngClass"],["for","EventDescription",1,"col-md-2","control-label"],[1,"glyphicon","glyphicon-asterisk","requiredColor"],[1,"col-md-10"],["id","EventDescription","name","EventDescription","rows","4","required","",1,"form-control",3,"ngModel","ngModelChange"],["eventDescription","ngModel"],["class","form-group",4,"ngIf"],[1,"list-group-item"],["name","damageForm"],[3,"ngClass"],[1,"col-md-3","control-label",3,"for"],[1,"col-md-9"],[1,"input-group"],["type","text","placeholder","Choose an option from the right or enter a different value...","id","PropertyDescription","required","",1,"form-control",3,"name","ngModel","ngModelChange"],["propertyDescription","ngModel"],[1,"input-group-btn"],["type","button","data-toggle","dropdown",1,"btn","btn-default","dropdown-toggle"],[1,"caret"],["role","menu",1,"dropdown-menu","dropdown-menu-right"],[4,"ngFor","ngForOf"],["type","text",1,"form-control",3,"name","id","ngModel","ngModelChange"],[1,"col-md-3"],["type","radio","value","Repair",3,"name","ngModel","ngModelChange"],["type","radio","value","Replace",3,"name","ngModel","ngModelChange"],[1,"col-md-2",3,"ngClass"],["type","number",1,"form-control",3,"id","name","ngModel","ngModelChange"],["actualDamage","ngModel"],[4,"ngIf"],[3,"click"],[1,"col-md-offset-3"],[1,"btn","btn-default",3,"disabled","click"],[1,"btn","btn-warning",3,"click"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"h3",1),e._uU(2,"City Property Details"),e.qZA(),e.TgZ(3,"div",2)(4,"div",3),e._uU(5,"City Properties Damaged"),e.qZA(),e.TgZ(6,"div",4),e.YNc(7,oe,34,23,"div",5),e.qZA(),e.TgZ(8,"div",6)(9,"div",7)(10,"div",8)(11,"button",9),e.NdJ("click",function(){return n.addDamageInfo()}),e._uU(12,"Add Another Property"),e.qZA()()()()(),e.TgZ(13,"div",10)(14,"label",11),e._uU(15," Describe Damage "),e._UZ(16,"span",12),e.qZA(),e.TgZ(17,"div",13)(18,"textarea",14,15),e.NdJ("ngModelChange",function(r){return n.currentSub.EventDescription=r}),e.qZA()()(),e.YNc(20,re,6,1,"div",16),e.qZA()),2&t){const i=e.MAs(19);e.xp6(7),e.Q6J("ngForOf",n.currentSub.DamageInfos),e.xp6(6),e.Q6J("ngClass",e.VKq(4,S,i.invalid&&(i.dirty||i.touched))),e.xp6(5),e.Q6J("ngModel",n.currentSub.EventDescription),e.xp6(2),e.Q6J("ngIf",!n.mode)}},dependencies:[s.mk,s.sg,s.O5,a._Y,a.Fj,a.wV,a._,a.JJ,a.JL,a.Q7,a.On,a.F]}),o})();function le(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"div",17)(1,"div",18)(2,"div",5),e._uU(3),e.qZA(),e.TgZ(4,"div",19)(5,"span",20),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.editSub(r))}),e.qZA(),e._UZ(6,"span",21),e.qZA()(),e.TgZ(7,"div",22)(8,"p"),e._uU(9),e.qZA()()()}if(2&o){const t=c.$implicit,n=e.oxw();e.Q6J("ngClass",n.getIncidentClass(t.type)),e.xp6(3),e.Oqu(t.type),e.xp6(6),e.Oqu(t.desc)}}function ae(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"recreation-modal",25),e.NdJ("onSaveSub",function(i){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onSaveSub(i))})("onCancelSub",function(i){e.CHM(t);const r=e.oxw(2);return e.KtG(r.cancelSub(i))}),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("currentSub",t.currentSub)}}function de(o,c){if(1&o){const t=e.EpF();e.TgZ(0,"city-property-model",25),e.NdJ("onSaveSub",function(i){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onSaveSub(i))})("onCancelSub",function(i){e.CHM(t);const r=e.oxw(2);return e.KtG(r.cancelSub(i))}),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("currentSub",t.currentSub)}}function se(o,c){if(1&o&&(e.TgZ(0,"div",23),e.YNc(1,ae,1,1,"recreation-modal",24),e.YNc(2,de,1,1,"city-property-model",24),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.selectedSubIncidentType===t.getIncidentTypeStringKey(t.constant.IncidentTypeStringNames.recreation)),e.xp6(1),e.Q6J("ngIf",t.selectedSubIncidentType===t.getIncidentTypeStringKey(t.constant.IncidentTypeStringNames.cityproperty))}}let pe=(()=>{class o{constructor(t,n,i,r,l){this.service=t,this.router=n,this.alertService=i,this.utilService=r,this.stringService=l,this.constant=u.s,this.editing=!1,this.subincidents=[],this.descriptions=[],this.selectedSubIncidentType="",this.currentSub=this.inItCurrentTab(),this.incident=this.service.incident,this.subincidents=this.service.subIncidents}ngOnInit(){this.stringService.getStrings(this.constant.StringTypes.allcityproperty).subscribe({next:t=>{this.descriptions=t}})}inItCurrentTab(){return{type:"",desc:"",saved:!1,DamageInfos:[{}]}}navigateToNext(){0===this.subincidents.length||this.editing||this.router.navigate(["wizard","regularreview"])}onSaveSub(t){this.currentSub.saved||(this.currentSub.saved=!0,this.subincidents.push(t)),this.editing=!1,this.currentSub=this.inItCurrentTab(),this.router.navigate(["wizard","subincidents"])}cancelSub(t){this.selectedSubIncidentType=""}saveSub(t,n){this.currentSub.type=t,this.currentSub.desc=n,this.onSaveSub(this.currentSub)}newSub(t){this.selectedSubIncidentType=t,this.editing=!0}getIncidentTypeStringKey(t){return this.utilService.getKeyByValue(this.constant.IncidentTypeStringNames,t)}editSub(t){this.editing=!0,this.currentSub=t;const n=this.utilService.getKeyByValue(this.constant.IncidentTypeStringNames,t.type);""!==n?this.selectedSubIncidentType=n:this.alertService.warn(`Invalid Sub Incident type: ${t.type}`)}getIncidentClass(t){switch(t){case this.constant.IncidentTypeStringNames.recreation:return"bg-primary";case this.constant.IncidentTypeStringNames.cityproperty:return"bg-success";case this.constant.IncidentTypeStringNames.noncityproperty:return"bg-default";case this.constant.IncidentTypeStringNames.cityvehicle:return"bg-info";case this.constant.IncidentTypeStringNames.noncityvehicle:return"bg-warning";case this.constant.IncidentTypeStringNames.nonemployeeinjury:return"bg-danger";default:return"bg-default"}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(f.a),e.Y36(m.F0),e.Y36(v.c),e.Y36(b.F),e.Y36(Z.N))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-subincident"]],decls:38,vars:9,consts:[[1,"jumbotron"],[1,"row"],[1,"col-md-4"],[1,"panel","panel-default"],[1,"panel-heading","clearfix"],[1,"pull-left"],[1,"btn-group","pull-right"],["type","button","data-toggle","dropdown",1,"btn","btn-primary","dropdown-toggle"],[1,"glyphicon","glyphicon-plus"],[1,"dropdown-menu"],[3,"click"],[1,"panel-body"],["class","card",3,"ngClass",4,"ngFor","ngForOf"],[1,"panel-footer"],[1,"btn","btn-primary",3,"disabled","click"],[1,"col-md-8"],["id","subincidents-content",4,"ngIf"],[1,"card",3,"ngClass"],[1,"cardheader","clearfix"],[1,"pull-right"],[1,"glyphicon","glyphicon-pencil",3,"click"],[1,"glyphicon","glyphicon-remove"],[1,"cardbody"],["id","subincidents-content"],[3,"currentSub","onSaveSub","onCancelSub",4,"ngIf"],[3,"currentSub","onSaveSub","onCancelSub"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"p"),e._uU(2,"Add specific details about the incident below. At least ONE detail line must be entered to proceed."),e.qZA()(),e.TgZ(3,"div",1)(4,"div",2)(5,"div",3)(6,"div",4)(7,"h4",5),e._uU(8,"Saved Incident Details"),e.qZA(),e.TgZ(9,"div",6)(10,"button",7),e._UZ(11,"span",8),e.qZA(),e.TgZ(12,"ul",9)(13,"li")(14,"a",10),e.NdJ("click",function(){return n.newSub(n.getIncidentTypeStringKey(n.constant.IncidentTypeStringNames.cityproperty))}),e._uU(15),e.qZA()(),e.TgZ(16,"li")(17,"a",10),e.NdJ("click",function(){return n.newSub(n.getIncidentTypeStringKey(n.constant.IncidentTypeStringNames.cityvehicle))}),e._uU(18),e.qZA()(),e.TgZ(19,"li")(20,"a",10),e.NdJ("click",function(){return n.newSub(n.getIncidentTypeStringKey(n.constant.IncidentTypeStringNames.noncityproperty))}),e._uU(21),e.qZA()(),e.TgZ(22,"li")(23,"a",10),e.NdJ("click",function(){return n.newSub(n.getIncidentTypeStringKey(n.constant.IncidentTypeStringNames.noncityvehicle))}),e._uU(24),e.qZA()(),e.TgZ(25,"li")(26,"a",10),e.NdJ("click",function(){return n.newSub(n.getIncidentTypeStringKey(n.constant.IncidentTypeStringNames.nonemployeeinjury))}),e._uU(27),e.qZA()(),e.TgZ(28,"li")(29,"a",10),e.NdJ("click",function(){return n.newSub(n.getIncidentTypeStringKey(n.constant.IncidentTypeStringNames.recreation))}),e._uU(30),e.qZA()()()()(),e.TgZ(31,"div",11),e.YNc(32,le,10,3,"div",12),e.qZA(),e.TgZ(33,"div",13)(34,"button",14),e.NdJ("click",function(){return n.navigateToNext()}),e._uU(35,"Next Step"),e.qZA()()()(),e.TgZ(36,"div",15),e.YNc(37,se,3,2,"div",16),e.qZA()()),2&t&&(e.xp6(15),e.Oqu(n.constant.IncidentTypeStringNames.cityproperty),e.xp6(3),e.Oqu(n.constant.IncidentTypeStringNames.cityvehicle),e.xp6(3),e.Oqu(n.constant.IncidentTypeStringNames.noncityproperty),e.xp6(3),e.Oqu(n.constant.IncidentTypeStringNames.noncityvehicle),e.xp6(3),e.Oqu(n.constant.IncidentTypeStringNames.nonemployeeinjury),e.xp6(3),e.Oqu(n.constant.IncidentTypeStringNames.recreation),e.xp6(2),e.Q6J("ngForOf",n.subincidents),e.xp6(2),e.Q6J("disabled",0===n.subincidents.length||n.editing),e.xp6(3),e.Q6J("ngIf",""!==n.selectedSubIncidentType))},dependencies:[s.mk,s.sg,s.O5,te,ce]}),o})();const ue=["wizardForm"];function ge(o,c){1&o&&(e.TgZ(0,"div",6),e._UZ(1,"router-outlet"),e.qZA())}const me=[{path:"",component:(()=>{class o{constructor(t){this.wizardService=t,this.isReady=!1}ngAfterViewInit(){this.wizardService.wizardForm=this.wizardForm,setTimeout(()=>{this.isReady=!0},0)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(f.a))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-wizard"]],viewQuery:function(t,n){if(1&t&&e.Gf(ue,5),2&t){let i;e.iGM(i=e.CRH())&&(n.wizardForm=i.first)}},decls:7,vars:1,consts:[[1,"row"],[1,"col-sm-8","col-sm-offset-2"],[1,"text-center"],["name","wizardForm",1,"ui-view-container"],["wizardForm","ngForm"],["id","wizard-content",4,"ngIf"],["id","wizard-content"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),e._uU(3,"File New Report"),e.qZA(),e.TgZ(4,"form",3,4),e.YNc(6,ge,2,0,"div",5),e.qZA()()()),2&t&&(e.xp6(6),e.Q6J("ngIf",n.isReady))},dependencies:[s.O5,m.lC,a._Y,a.JL,a.F]}),o})(),children:[{path:"incidentType",component:F},{path:"regular",component:B},{path:"subincidents",component:pe},{path:"regularreview",component:Y},{path:"noc",component:D.U},{path:"nocreview",component:k},{path:"injury",component:U.w},{path:"injuryreview",component:O},{path:"exposure",component:R.e},{path:"exposurereview",component:w}]}];let _e=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[m.Bz.forChild(me),m.Bz]}),o})();var he=d(9994);let ve=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[s.ez,_e,a.u5,he.n,T.kn.forRoot()]}),o})()}}]);